var substringMatcher=function(e){return function t(s,a){var n,o;n=[],substrRegex=new RegExp(s,"i"),$.each(e,function(e,t){substrRegex.test(t)&&n.push(t)}),a(n)}},keywordsRequest=$.ajax({url:"http://www.cpd.utoronto.ca/wp-json/cpdprograms/v1/keywords",method:"GET",dataType:"json"});keywordsRequest.done(function(e){$(".simple-keywords-list").select2({data:e}),$(".simple-keywords-list").on("select2:select",function(e){var t=e.params.data.text,s=$("#cpd-keywords-selected").val();$("#cpd-keywords-selected").val(s+t+"\n")})});var evmsRequest=$.ajax({url:"http://eventsapi.cpdtoronto.ca/api/2/events/",method:"GET",dataType:"json"});evmsRequest.done(function(e){var t=[];$.each(e,function(e,s){var a={id:s.code,text:s.name};t.push(a)}),$(".evms-events").select2({data:t,allowClear:!1}),$(".evms-events").on("select2:select",function(e){var t=e.params.data.id;console.log(t),$.ajax({url:"http://eventsapi.cpdtoronto.ca/api/2/event/"+t,method:"GET",dataType:"json",success:function(e){var t=e[0].keywords,s=t.join("\n"),a=$("#cpd-keywords-selected").val();$("#cpd-keywords-selected").val(a+s+"\n")}})})}),$("#createDestiny").click(function(e){e.preventDefault();var t=$("#cpd-keywords-selected").val().trim(),s=t.split("\n"),a=[];$.each(s,function(e,t){-1===$.inArray(t,a)&&a.push(t)});var n="'"+a.join("';'")+"'";$("#cpd-keywords-for-d1").val("<!--"+n+"-->")});